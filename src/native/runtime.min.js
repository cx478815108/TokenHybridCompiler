const token=(()=>{let t=!1,e=[];const n=(t,e)=>{const[r,o]=[typeof t,typeof e];if(r!==o)return!1;if("object"===r){if(Array.isArray(t)){const r=t.length;if(Array.isArray(e)&&r===e.length){for(let o=0;o<r;o++){const[r,s]=[t[o],e[o]];if("object"!=typeof r&&r!==s)return!1;if(!n(r,s))return!1}return!0}return!1}const[r,o]=[Object.keys(t),Object.keys(e)],s=r.length;if(s!==o.length)return!1;for(let o=0;o<s;o++){const s=r[o],[i,a]=[t[s],e[s]];if("object"!=typeof i&&i!==a)return!1;if(!n(i,a))return!1}return!0}return t===e},r=(n,r)=>{let o=[];const s=new WeakMap;let i=!1,a=null;return((n,r)=>{const c={set:(t,e,n,r)=>{o=[],Reflect.set(t,e,n,r),a=null},get:(t,n,r)=>(o=[],i=!1,e=[],a=t,Reflect.get(t,n,r))};return new Proxy(((n,r)=>{const a=(n,s,i,a)=>{const c=n[s],u=Reflect.set(n,s,i,a);return r&&(o.push(s),r(n,o,c,i,e),t=!1),u},c=(n,r,u)=>{const l=n[r];if(t)return n[r];if(Array.isArray(n[r])&&e.push(r),e.length&&"string"==typeof r){const t=parseInt(r);isNaN(t)||e.push(r)}if(i||("function"==typeof l?i=!0:o.push(r)),"object"==typeof l&&!s.get(l)){const t=new Proxy(l,{set:a,get:c});return Reflect.set(n,r,t,u),s.set(t,!0),t}return Reflect.get(n,r,u)};return new Proxy(n,{set:a,get:c})})(n,r),c)})(JSON.parse(JSON.stringify(n)),r)},o=t=>{let[e,n,r]=[{},{},{}];const o=t.length;for(let s=0;s<o;s++){const o={key:t[s]};0!=s?(r=o,n.next=o,n=r):e=n=o}return r&&delete r.next,e},s=(t,e,r,s)=>{let i=0;const a={oldValue:r};let c;if(Array.isArray(r)&&Array.isArray(s)){if(c=o(e),0==s.length)return a.type=2,a.newVal=[],a.keyPath=c,a;const t=Math.min(r.length,s.length),u=r.slice(0,t),l=s.slice(0,t);n(u,l)?r.length>s.length?(i=2,a.newValue=u):(i=1,a.newValue=s.slice(t,s.length)):a.newValue=s}else Array.isArray(t)?(i=r?0:1,a.newValue=r?s:[s],c=o(r?e:e.slice(0,e.length-1))):(c=o(e),a.newValue=s);return a.type=i,a.keyPath=c,a};const i=new class{constructor(){this.components=new Map}registComponent(t,e){e.data&&"function"==typeof e.data&&this.components.set(t,e)}getComponent(t){return this.components.get(t)}},a={},c=new Map;return a.registComponent=function(e,o){const a=new class{constructor(e,o){this.componentName=e,this.methods=o.methods,this.listeners=o.listeners,"function"==typeof o.data&&(this.data=r(o.data(),(e,r,o,i,a)=>{if(t=!0,n(o,i))return;const c=s(e,r,o,i);if(c.component=this.componentName,a.length){let t=this.data,e="";for(;e=a.shift();)t=t?t[e]:t;c.newArrayItem=t}"function"==typeof TokenDataChanged?TokenDataChanged(c):console.log(JSON.stringify(c))}))}}(e,o);return c.set(e,a),i.registComponent(e,o),a},a.getListener=function(t,e){const n=i.components.get(e);return n&&n.listeners?n.listeners[t]:null},a.getComponent=function(t){return c.get(t)},a.getComponentData=function(){const t={};for(const e of i.components.keys()){const n=i.components.get(e);"function"==typeof n.data&&(t[e]=n.data())}return t},a.navigateTo=function(t){TokenNavigateToFirst(t)},a.navigateToRoot=function(t){TokenNavigateTo(t)},a.navigateBack=function(t){TokenNavigateBack(t)},a.exitApp=function(){TokenExitApp()},a.invokeComponentMethod=function(t){const e=c.get(t.component);if(!e&&!e.methods)return;const n=e.methods[t.f];if("function"!=typeof n)return;const r=t.p;if(!r)return n();const o=t.$;o&&r.push(o),n(...r)},a})();class Animation{constructor(t,e){this.c=t,this.id=e}commit(){const t=this;return new Promise((e,n)=>{TokenCommitAnimation(t.c,t.id,e)})}static create(t,e){return new Animation(t,e)}static animation(t,e){return{commit:n=>Array.isArray(n)?new Promise(r=>{const o=[];n.forEach(t=>{t.id&&o.push(t.id)}),0!==o.length?(t(),$native.animation(o,e,()=>{r()})):r()}):Promise.reject("commit() should receive Array!")}}}const App=t=>(this.lcs||"object"!=typeof t||(TokenLifeCirclesDefine(t),this.lcs=t),this.lcs);$http=(()=>{return new class{request(t){return new Promise((e,n)=>{const r={};r.url=t.url,r.method=t.method||"GET",r.timeout=t.timeout||30,r["json"===t.type?"responseJSON":"responseText"]=((t,n)=>{e({data:t,response:n})}),t.cache&&(r.cache=!0),t.ua&&(r.UA=t.ua),t.headers&&(r.headers=t.headers),t.data&&(r.parameters=t.data),t.redirect&&(r.redirect=t.redirect),r.failure=((t,e)=>{n({reason:t,code:e})}),$native.request(r)})}postJSON(t,e){return this.request({url:t,data:e,method:"POST",type:"json"})}getJSON(t){return this.request({url:t,type:"json"})}getText(t,e){return this.request({url:t})}postText(t,e){return this.request({url:t,data:e,method:"POST"})}}})();